<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="css/typespy.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="js/typespy.js"></script>
        <script>
        $(function() {
            logger = new TYPESPY.Logger('#input-text', '#user-email');

            $('#button-submit').click(function() {
                console.log(logger.asJSON());
                var s = '';
                logger.log.forEach(function(x) { s = s + x.character; });
                console.log(s);

                $.ajax({
                        url: '/insert',
                        data: logger.asJSON(),
                        success: function(data) {
                            if (data.status === 'success') {
                                alert('We have received your input!');
                            } else {
                                alert('Something went wrong, maybe you try again?');
                            }
                            console.log(data);
                        },
                        type: 'POST',
                        contentType: 'APPLICATION/JSON'
                        });

                logger.clearLog();
            });

            $('#button-clear').click(function() {
                logger.clearLog();
            });

            $('#button-classify').click(function() {
                console.log(logger.asJSON());
                var s = '';
                logger.log.forEach(function(x) {s = s + x.character; });
                console.log(s);

                $.ajax({
                    url: '/classify',
                    data: logger.asJSON(),
                    success: function(data) {
                        console.log(data);
                        logger.inputElement.val('');
                        },
                    type: 'POST',
                    contentType: "APPLICATION/JSON"
                });

                logger.clearLog();
            });

        });
        </script>
        <title>TypeSpy</title>
    </head>
    <body>
        <h1>TypeSpy</h1>

        <h2>Directions</h2>
        <p>Enter your email address in the first box, then type the text shown
        under "Sample Text" into the box. Try not to make mistakes while
        typing. If you do, click the "Reset" button and try again before
        submitting. Once you are done, click the <strong>Submit</strong>
        button. If you can, please submit at least five samples.</p>

        <h2>Email address</h2>
        <input id="user-email" type="text" />

        <h2>Sample Text</h2>
        <p class="sample">Typing is the process of writing or inputting text by pressing
        keys.</p>

        <h2>Type some stuff in this box</h2>
        <textarea id="input-text"></textarea>
        <div id="button-bar">
            <button id="button-submit">Submit</button>
            <button id="button-clear">Reset</button>
            <!--<button id="button-classify">Classify</button>-->
        </div>
    </body>
</html>
